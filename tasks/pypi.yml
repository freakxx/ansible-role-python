---
# file: roles/fubarhouse.python/tasks/pypi.yml

- name: "PyPI | Locate Pip/PyPI"
  become: yes
  become_user: "{{ fubarhouse_user }}"
  shell: "which pip"
  register: pypi_exec

- name: "PyPI | Ensure installed and updated"
  become: yes
  become_user: "{{ fubarhouse_user }}"
  pip:
    name: "{{ item }}"
    state: latest
    executable: "{{ pypi_exec.stdout }}"
  with_items: "{{ python_packages }}"
